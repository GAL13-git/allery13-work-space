<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery 13 | Work Space</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="js/telegram.js" defer></script>
    <script src="config.js" defer></script>
    <script src="js/auth.js" defer></script>
</head>
<body>
    <div class="container">
        <!-- –õ–æ–≥–æ—Ç–∏–ø Gallery 13 -->
        <div class="logo-header">
            <div class="logo-icon">üñºÔ∏è</div>
            <h1>Gallery 13</h1>
            <p class="logo-subtitle">Work Space</p>
            <p class="company-info">–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã</p>
        </div>

        <!-- –í—ã–±–æ—Ä –∑–æ–Ω—ã Gallery 13 -->
        <div class="card" id="location-selector">
            <h2>üìç –í—ã–±–µ—Ä–∏—Ç–µ –∑–æ–Ω—É</h2>
            <p class="hint">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–±–æ—á—É—é –∑–æ–Ω—É –≤ Gallery 13</p>
            <div class="location-grid" id="location-list">
                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ config.js -->
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
        <div class="card" id="login-form" style="display: none;">
            <h2>üîê –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
            <div class="selected-location-info">
                <span id="selected-location-name"></span>
                <span id="selected-location-address"></span>
            </div>
            
            <div class="form-group">
                <label for="pin-input">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à PIN-–∫–æ–¥</label>
                <div class="pin-input-container">
                    <input type="password" id="pin-input" maxlength="4" 
                           inputmode="numeric" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="off">
                    <button class="btn-icon" id="toggle-pin">üëÅÔ∏è</button>
                </div>
                
                <div class="pin-keyboard">
                    <button class="pin-btn" data-digit="1">1</button>
                    <button class="pin-btn" data-digit="2">2</button>
                    <button class="pin-btn" data-digit="3">3</button>
                    <button class="pin-btn" data-digit="4">4</button>
                    <button class="pin-btn" data-digit="5">5</button>
                    <button class="pin-btn" data-digit="6">6</button>
                    <button class="pin-btn" data-digit="7">7</button>
                    <button class="pin-btn" data-digit="8">8</button>
                    <button class="pin-btn" data-digit="9">9</button>
                    <button class="pin-btn" data-digit="0">0</button>
                    <button class="pin-btn delete" id="pin-delete">‚å´</button>
                </div>
            </div>
            
            <button class="btn btn-primary" id="login-btn">
                <span class="btn-icon">üö™</span>
                –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
            </button>
            
            <div class="login-footer">
                <p class="hint">–ï—Å–ª–∏ –∑–∞–±—ã–ª–∏ PIN, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É</p>
            </div>
            
            <div class="error-message" id="login-error"></div>
        </div>

        <!-- –ê–Ω–æ–Ω–∏–º–Ω—ã–π –¥–æ—Å—Ç—É–ø -->
        <div class="card anonymous-access">
            <div class="anonymous-header">
                <span class="icon">üïµÔ∏è</span>
                <h3>–ê–Ω–æ–Ω–∏–º–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ</h3>
            </div>
            <p class="hint">–ú–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∞–Ω–æ–Ω–∏–º–Ω–æ</p>
            <button class="btn btn-secondary" id="anonymous-complaint-btn">
                <span class="btn-icon">üì®</span>
                –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω–æ
            </button>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ -->
        <div class="system-info">
            <p>üñºÔ∏è <strong>Gallery 13 Work Space</strong></p>
            <p>‚è∞ –†–∞–±–æ—á–∏–µ —á–∞—Å—ã: <strong>10:00 - 22:00</strong></p>
            <p class="copyright">¬© 2024 Gallery 13. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–∏—Å–æ–∫ –∑–æ–Ω Gallery 13
            const locationList = document.getElementById('location-list');
            GALLERY13_CONFIG.locations.forEach(location => {
                const locationCard = document.createElement('div');
                locationCard.className = 'location-card';
                locationCard.innerHTML = `
                    <div class="location-icon">üìç</div>
                    <div class="location-info">
                        <strong>${location.name}</strong>
                        <small>${location.address}</small>
                    </div>
                    <div class="location-select">‚Üí</div>
                `;
                locationCard.addEventListener('click', () => {
                    selectLocation(location.id);
                });
                locationList.appendChild(locationCard);
            });

            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ PIN
            document.getElementById('toggle-pin').addEventListener('click', function() {
                const pinInput = document.getElementById('pin-input');
                pinInput.type = pinInput.type === 'password' ? 'text' : 'password';
                this.textContent = pinInput.type === 'password' ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è';
            });

            // PIN-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
            document.querySelectorAll('.pin-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const pinInput = document.getElementById('pin-input');
                    if (this.id === 'pin-delete') {
                        pinInput.value = pinInput.value.slice(0, -1);
                    } else {
                        const digit = this.getAttribute('data-digit');
                        if (pinInput.value.length < 4) {
                            pinInput.value += digit;
                        }
                    }
                });
            });

            // –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞
            document.getElementById('login-btn').addEventListener('click', function() {
                const location = window.selectedLocation;
                const pin = document.getElementById('pin-input').value;
                
                const employee = authenticateEmployee(location, pin);
                if (employee) {
                    window.currentEmployee = employee;
                    window.location.href = 'dashboard.html';
                } else {
                    document.getElementById('login-error').textContent = 
                        '–ù–µ–≤–µ—Ä–Ω—ã–π PIN-–∫–æ–¥ –∏–ª–∏ –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–æ–π –∑–æ–Ω–µ –∑–∞–ø—Ä–µ—â–µ–Ω';
                }
            });

            // –ê–Ω–æ–Ω–∏–º–Ω–∞—è –∂–∞–ª–æ–±–∞
            document.getElementById('anonymous-complaint-btn').addEventListener('click', function() {
                window.location.href = 'anonymous.html?anonymous=true';
            });
        });

        function selectLocation(locationId) {
            window.selectedLocation = locationId;
            const location = GALLERY13_CONFIG.locations.find(l => l.id === locationId);
            
            document.getElementById('selected-location-name').textContent = location.name;
            document.getElementById('selected-location-address').textContent = location.address;
            
            document.getElementById('location-selector').style.display = 'none';
            document.getElementById('login-form').style.display = 'block';
            
            // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ PIN
            setTimeout(() => {
                document.getElementById('pin-input').focus();
            }, 100);
        }
    </script>
</body>
</html>