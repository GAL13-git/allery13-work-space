<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery 13 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header class="gallery-header">
            <div class="header-left">
                <button class="btn-icon back-btn" onclick="window.location.href='dashboard.html'">
                    ‚Üê
                </button>
                <div class="gallery-brand">
                    <span class="brand-icon">üë•</span>
                    <div>
                        <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π</h1>
                        <p class="brand-subtitle">Gallery 13 Personnel</p>
                    </div>
                </div>
            </div>
            
            <div class="header-actions">
                <button class="btn-icon" onclick="showAddEmployeeForm()" title="–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞">
                    ‚ûï
                </button>
                <button class="btn-icon" onclick="exportEmployees()" title="–≠–∫—Å–ø–æ—Ä—Ç">
                    üì•
                </button>
                <button class="btn-icon" onclick="refreshEmployees()" title="–û–±–Ω–æ–≤–∏—Ç—å">
                    üîÑ
                </button>
            </div>
        </header>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–∞–Ω–¥—ã -->
        <div class="team-stats">
            <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-content">
                    <span class="stat-number" id="total-employees">0</span>
                    <span class="stat-label">–í—Å–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</span>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-content">
                    <span class="stat-number" id="active-employees">0</span>
                    <span class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö</span>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">üìç</div>
                <div class="stat-content">
                    <span class="stat-number" id="locations-count">0</span>
                    <span class="stat-label">–õ–æ–∫–∞—Ü–∏–π</span>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">üîÑ</div>
                <div class="stat-content">
                    <span class="stat-number" id="shifts-today">0</span>
                    <span class="stat-label">–°–º–µ–Ω —Å–µ–≥–æ–¥–Ω—è</span>
                </div>
            </div>
        </div>

        <!-- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
        <div class="filters-section">
            <div class="search-box">
                <span class="search-icon">üîç</span>
                <input type="text" id="employee-search" placeholder="–ü–æ–∏—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤..." 
                       oninput="searchEmployees()">
                <button class="btn-icon" onclick="clearSearch()">‚úï</button>
            </div>
            
            <div class="filter-buttons">
                <button class="filter-btn active" onclick="setRoleFilter('all')">
                    –í—Å–µ —Ä–æ–ª–∏
                </button>
                <button class="filter-btn" onclick="setRoleFilter('admin')">
                    –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è
                </button>
                <button class="filter-btn" onclick="setRoleFilter('staff')">
                    –ü–µ—Ä—Å–æ–Ω–∞–ª
                </button>
                <button class="filter-btn" onclick="setRoleFilter('inactive')">
                    –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ
                </button>
            </div>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
        <div class="section-title">
            <h2>üìã –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h2>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∏ –ø—Ä–∞–≤–∞–º–∏</p>
        </div>

        <div class="employees-table">
            <div class="table-header">
                <div class="table-col name">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</div>
                <div class="table-col role">–†–æ–ª—å</div>
                <div class="table-col location">–õ–æ–∫–∞—Ü–∏—è</div>
                <div class="table-col status">–°—Ç–∞—Ç—É—Å</div>
                <div class="table-col actions">–î–µ–π—Å—Ç–≤–∏—è</div>
            </div>
            
            <div class="table-body" id="employees-list">
                <!-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
        <div class="floating-action">
            <button class="fab-btn" onclick="showAddEmployeeForm()">
                <span class="fab-icon">+</span>
            </button>
        </div>

        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ -->
        <div class="modal-overlay" id="employee-form-modal" style="display: none;">
            <div class="modal-content large">
                <div class="modal-header">
                    <h2 id="form-title">–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h2>
                    <button class="btn-icon" onclick="hideEmployeeForm()">‚úï</button>
                </div>
                
                <form id="employee-form" class="form-grid">
                    <div class="form-section">
                        <h3>üë§ –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                        
                        <div class="form-group">
                            <label>–§–ò–û *</label>
                            <input type="text" id="employee-name" required>
                        </div>
                        
                        <div class="form-group">
                            <label>–î–æ–ª–∂–Ω–æ—Å—Ç—å *</label>
                            <input type="text" id="employee-position" required>
                        </div>
                        
                        <div class="form-group">
                            <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                            <input type="tel" id="employee-phone" 
                                   pattern="[\+]\d{1,3}[-\s]?\(?\d{1,3}\)?[-\s]?\d{1,4}[-\s]?\d{1,4}[-\s]?\d{1,9}"
                                   placeholder="+7 (XXX) XXX-XX-XX">
                        </div>
                        
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="employee-email">
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>üîê –î–æ—Å—Ç—É–ø –∏ –ø—Ä–∞–≤–∞</h3>
                        
                        <div class="form-group">
                            <label>–†–æ–ª—å *</label>
                            <select id="employee-role" required onchange="updatePermissions()">
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</option>
                                <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                                <option value="assistant">–ü–æ–º–æ—â–Ω–∏–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</option>
                                <option value="manager">–ú–µ–Ω–µ–¥–∂–µ—Ä</option>
                                <option value="cashier">–ö–∞—Å—Å–∏—Ä</option>
                                <option value="security">–û—Ö—Ä–∞–Ω–∞</option>
                                <option value="consultant">–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</option>
                                <option value="webdev">Web-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>–õ–æ–∫–∞—Ü–∏—è *</label>
                            <select id="employee-location" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ª–æ–∫–∞—Ü–∏—é</option>
                                ${GALLERY13_CONFIG.locations.map(loc => 
                                    `<option value="${loc.id}">${loc.name}</option>`
                                ).join('')}
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>PIN-–∫–æ–¥ *</label>
                            <div class="pin-input-group">
                                <input type="password" id="employee-pin" 
                                       pattern="[0-9]{4}" maxlength="4" 
                                       placeholder="4 —Ü–∏—Ñ—Ä—ã" required>
                                <button type="button" class="btn-icon" onclick="generatePin()">
                                    üîÑ
                                </button>
                            </div>
                            <small class="hint">4 —Ü–∏—Ñ—Ä—ã –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Telegram ID</label>
                            <input type="text" id="employee-telegram" 
                                   placeholder="@username –∏–ª–∏ 123456789">
                        </div>
                    </div>
                    
                    <div class="form-section full-width">
                        <h3>üîê –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞</h3>
                        <div class="permissions-grid" id="permissions-list">
                            <!-- –ü—Ä–∞–≤–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                    
                    <div class="form-section full-width">
                        <h3>üìÖ –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã</h3>
                        <div class="schedule-grid">
                            <div class="schedule-day">
                                <label>–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</label>
                                <input type="time" id="mon-start"> -
                                <input type="time" id="mon-end">
                            </div>
                            <div class="schedule-day">
                                <label>–í—Ç–æ—Ä–Ω–∏–∫</label>
                                <input type="time" id="tue-start"> -
                                <input type="time" id="tue-end">
                            </div>
                            <div class="schedule-day">
                                <label>–°—Ä–µ–¥–∞</label>
                                <input type="time" id="wed-start"> -
                                <input type="time" id="wed-end">
                            </div>
                            <div class="schedule-day">
                                <label>–ß–µ—Ç–≤–µ—Ä–≥</label>
                                <input type="time" id="thu-start"> -
                                <input type="time" id="thu-end">
                            </div>
                            <div class="schedule-day">
                                <label>–ü—è—Ç–Ω–∏—Ü–∞</label>
                                <input type="time" id="fri-start"> -
                                <input type="time" id="fri-end">
                            </div>
                            <div class="schedule-day">
                                <label>–°—É–±–±–æ—Ç–∞</label>
                                <input type="time" id="sat-start"> -
                                <input type="time" id="sat-end">
                            </div>
                            <div class="schedule-day">
                                <label>–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</label>
                                <input type="time" id="sun-start"> -
                                <input type="time" id="sun-end">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="hideEmployeeForm()">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" class="btn btn-primary" id="form-submit-btn">
                            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- –î–µ—Ç–∞–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–º–æ–¥–∞–ª—å–Ω–æ–µ) -->
        <div class="modal-overlay" id="employee-detail-modal" style="display: none;">
            <div class="modal-content large">
                <div class="modal-header">
                    <h2 id="detail-employee-name"></h2>
                    <button class="btn-icon" onclick="hideEmployeeDetail()">‚úï</button>
                </div>
                
                <div class="employee-detail-tabs">
                    <button class="tab-btn active" onclick="switchTab('info')">üë§ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>
                    <button class="tab-btn" onclick="switchTab('schedule')">üìÖ –ì—Ä–∞—Ñ–∏–∫</button>
                    <button class="tab-btn" onclick="switchTab('activity')">üìä –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</button>
                    <button class="tab-btn" onclick="switchTab('access')">üîê –î–æ—Å—Ç—É–ø</button>
                </div>
                
                <div class="tab-content" id="tab-info">
                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ -->
                </div>
                
                <div class="tab-content" id="tab-schedule" style="display: none;">
                    <!-- –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã -->
                </div>
                
                <div class="tab-content" id="tab-activity" style="display: none;">
                    <!-- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å -->
                </div>
                
                <div class="tab-content" id="tab-access" style="display: none;">
                    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º -->
                </div>
                
                <div class="detail-actions">
                    <button class="btn btn-secondary" onclick="editEmployee()">
                        ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                    <button class="btn btn-secondary" onclick="resetPassword()">
                        üîÑ –°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å
                    </button>
                    <button class="btn btn-danger" onclick="deactivateEmployee()">
                        üö´ –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                </div>
            </div>
        </div>

        <!-- –ò–º–ø–æ—Ä—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–º–æ–¥–∞–ª—å–Ω–æ–µ) -->
        <div class="modal-overlay" id="import-modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üì• –ò–º–ø–æ—Ä—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h2>
                    <button class="btn-icon" onclick="hideImportModal()">‚úï</button>
                </div>
                
                <div class="import-content">
                    <div class="import-option">
                        <div class="option-icon">üìÑ</div>
                        <div class="option-info">
                            <strong>–§–∞–π–ª Excel/CSV</strong>
                            <small>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</small>
                        </div>
                        <input type="file" id="file-upload" accept=".csv,.xlsx,.xls" 
                               style="display: none;" onchange="handleFileUpload()">
                        <button class="btn btn-secondary" onclick="document.getElementById('file-upload').click()">
                            –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª
                        </button>
                    </div>
                    
                    <div class="import-option">
                        <div class="option-icon">üìã</div>
                        <div class="option-info">
                            <strong>–í—Å—Ç–∞–≤–∏—Ç—å –∏–∑ —Ç–∞–±–ª–∏—Ü—ã</strong>
                            <small>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Excel/Google Sheets</small>
                        </div>
                        <textarea id="paste-data" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –∑–¥–µ—Å—å..." 
                                  rows="6"></textarea>
                    </div>
                    
                    <div class="import-hint">
                        <p>üìù –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:</p>
                        <p>–§–ò–û | –î–æ–ª–∂–Ω–æ—Å—Ç—å | –¢–µ–ª–µ—Ñ–æ–Ω | Email | –†–æ–ª—å | –õ–æ–∫–∞—Ü–∏—è | PIN</p>
                    </div>
                    
                    <div class="import-actions">
                        <button class="btn btn-secondary" onclick="hideImportModal()">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                        <button class="btn btn-primary" onclick="processImport()">
                            –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* –°—Ç–∏–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ */
        .team-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .stat-icon {
            font-size: 32px;
        }

        .stat-content {
            display: flex;
            flex-direction: column;
        }

        .stat-number {
            font-size: 32px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-purple), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .filters-section {
            background: var(--surface);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .search-box {
            position: relative;
            display: flex;
            align-items: center;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 4px 16px;
            margin-bottom: 20px;
        }

        .search-icon {
            color: var(--text-secondary);
            margin-right: 12px;
        }

        .search-box input {
            flex: 1;
            background: none;
            border: none;
            color: var(--text);
            font-size: 16px;
            padding: 16px 0;
        }

        .search-box input:focus {
            outline: none;
        }

        .filter-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            background: var(--surface-light);
            border: 1px solid var(--border);
            border-radius: 20px;
            color: var(--text);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .filter-btn:hover {
            background: var(--border);
        }

        .filter-btn.active {
            background: var(--primary-purple);
            color: white;
            border-color: var(--primary-purple);
        }

        .employees-table {
            background: var(--surface);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 100px;
        }

        .table-header {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr auto;
            gap: 20px;
            padding: 20px;
            background: var(--surface-light);
            border-bottom: 1px solid var(--border);
            font-weight: 600;
            color: var(--text-secondary);
        }

        .table-body {
            max-height: 500px;
            overflow-y: auto;
        }

        .employee-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr auto;
            gap: 20px;
            padding: 20px;
            border-bottom: 1px solid var(--border);
            align-items: center;
            transition: background 0.2s ease;
        }

        .employee-row:hover {
            background: var(--surface-light);
        }

        .employee-row.inactive {
            opacity: 0.6;
            background: var(--surface-light);
        }

        .employee-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .employee-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--surface-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .employee-details {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .employee-name {
            font-weight: 600;
        }

        .employee-position {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .role-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
        }

        .role-admin {
            background: rgba(139, 92, 246, 0.2);
            color: var(--primary-purple);
        }

        .role-assistant {
            background: rgba(59, 130, 246, 0.2);
            color: var(--accent-blue);
        }

        .role-manager {
            background: rgba(16, 185, 129, 0.2);
            color: var(--accent-green);
        }

        .role-cashier {
            background: rgba(245, 158, 11, 0.2);
            color: var(--accent-orange);
        }

        .role-other {
            background: var(--surface-light);
            color: var(--text);
        }

        .location-tag {
            padding: 6px 12px;
            background: var(--surface-light);
            border-radius: 12px;
            font-size: 14px;
            color: var(--text);
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
        }

        .status-active {
            background: rgba(16, 185, 129, 0.2);
            color: var(--accent-green);
        }

        .status-inactive {
            background: rgba(239, 68, 68, 0.2);
            color: var(--accent-red);
        }

        .status-away {
            background: rgba(245, 158, 11, 0.2);
            color: var(--accent-orange);
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }

        .action-btn {
            background: none;
            border: 1px solid var(--border);
            border-radius: 8px;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            background: var(--surface-light);
            border-color: var(--primary-purple);
        }

        /* –§–æ—Ä–º–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            padding: 24px;
        }

        @media (max-width: 1024px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
        }

        .form-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-section.full-width {
            grid-column: 1 / -1;
        }

        .form-section h3 {
            margin-bottom: 8px;
            font-size: 18px;
        }

        .pin-input-group {
            display: flex;
            gap: 12px;
        }

        .pin-input-group input {
            flex: 1;
        }

        .permissions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
        }

        .permission-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: var(--surface-light);
            border-radius: 12px;
        }

        .permission-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
        }

        .permission-info {
            flex: 1;
        }

        .permission-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .permission-description {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .schedule-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
        }

        .schedule-day {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .schedule-day label {
            font-weight: 500;
            color: var(--text-secondary);
        }

        .schedule-day input {
            width: 100%;
            padding: 12px;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
        }

        .form-actions {
            grid-column: 1 / -1;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
        }

        /* –í–∫–ª–∞–¥–∫–∏ –¥–µ—Ç–∞–ª–µ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ */
        .employee-detail-tabs {
            display: flex;
            gap: 8px;
            padding: 0 24px;
            border-bottom: 1px solid var(--border);
        }

        .tab-btn {
            padding: 16px 24px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            color: var(--text);
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .tab-btn:hover {
            background: var(--surface-light);
        }

        .tab-btn.active {
            border-bottom-color: var(--primary-purple);
            color: var(--primary-purple);
        }

        .tab-content {
            padding: 24px;
            min-height: 300px;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
        }

        .detail-card {
            background: var(--surface-light);
            border-radius: 16px;
            padding: 24px;
        }

        .detail-card h3 {
            margin-bottom: 16px;
            font-size: 18px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: var(--text-secondary);
        }

        .detail-value {
            font-weight: 500;
        }

        .detail-actions {
            display: flex;
            gap: 12px;
            padding: 24px;
            border-top: 1px solid var(--border);
        }

        .btn-danger {
            background: var(--accent-red);
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        /* –ò–º–ø–æ—Ä—Ç */
        .import-content {
            padding: 24px;
        }

        .import-option {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 24px;
            background: var(--surface-light);
            border-radius: 16px;
            margin-bottom: 20px;
        }

        .option-icon {
            font-size: 32px;
        }

        .option-info {
            flex: 1;
        }

        .option-info strong {
            display: block;
            margin-bottom: 4px;
        }

        .option-info small {
            color: var(--text-secondary);
        }

        .import-option textarea {
            width: 100%;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            padding: 16px;
            font-family: monospace;
            font-size: 14px;
            resize: vertical;
            min-height: 120px;
        }

        .import-hint {
            background: rgba(59, 130, 246, 0.1);
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 24px;
            font-size: 14px;
        }

        .import-hint p {
            margin-bottom: 8px;
        }

        .import-actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .table-header, .employee-row {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .table-col.actions {
                justify-self: end;
            }
            
            .team-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .employee-detail-tabs {
                overflow-x: auto;
                flex-wrap: nowrap;
            }
            
            .tab-btn {
                white-space: nowrap;
            }
        }
    </style>

    <script>
        let employees = [];
        let currentEmployeeId = null;
        let currentRoleFilter = 'all';
        let currentSearchQuery = '';

        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
            if (!window.currentEmployee) {
                window.location.href = 'index.html';
                return;
            }

            const permissions = GALLERY13_CONFIG.permissions[window.currentEmployee.role];
            if (!permissions.includes('manage_employees')) {
                window.location.href = 'dashboard.html';
                return;
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
            loadEmployees();
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã
            document.getElementById('employee-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveEmployee();
            });
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∞–≤–∞ –¥–ª—è —Ñ–æ—Ä–º—ã
            updatePermissions();
        });

        function loadEmployees() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞
            // –ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ config.js
            employees = [...EMPLOYEES_DB];
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
            employees = employees.concat([
                {
                    id: 4,
                    name: '–ê–Ω–Ω–∞ –°–∏–¥–æ—Ä–æ–≤–∞',
                    role: 'cashier',
                    position: '–ö–∞—Å—Å–∏—Ä',
                    location: 'gallery13_main',
                    pin: '1316',
                    telegramId: 'cashier_g13',
                    phone: '+7 (999) 123-45-67',
                    email: 'anna@gallery13.ru',
                    status: 'active',
                    schedule: {
                        mon: '10:00-18:00',
                        tue: '10:00-18:00',
                        wed: '10:00-18:00',
                        thu: '10:00-18:00',
                        fri: '10:00-18:00',
                        sat: '12:00-20:00',
                        sun: '–≤—ã—Ö–æ–¥–Ω–æ–π'
                    }
                },
                {
                    id: 5,
                    name: '–ò–≤–∞–Ω –ö—É–∑–Ω–µ—Ü–æ–≤',
                    role: 'security',
                    position: '–û—Ö—Ä–∞–Ω–∞',
                    location: 'gallery13_storage',
                    pin: '1317',
                    telegramId: 'security_g13',
                    phone: '+7 (999) 765-43-21',
                    status: 'active'
                },
                {
                    id: 6,
                    name: '–ï–ª–µ–Ω–∞ –í–æ—Ä–æ–±—å–µ–≤–∞',
                    role: 'consultant',
                    position: '–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç',
                    location: 'gallery13_vip',
                    pin: '1318',
                    telegramId: 'consultant_g13',
                    status: 'away'
                }
            ]);
            
            updateStatistics();
            displayEmployees();
        }

        function updateStatistics() {
            const total = employees.length;
            const active = employees.filter(e => e.status === 'active').length;
            const locations = [...new Set(employees.map(e => e.location))].length;
            
            document.getElementById('total-employees').textContent = total;
            document.getElementById('active-employees').textContent = active;
            document.getElementById('locations-count').textContent = locations;
            document.getElementById('shifts-today').textContent = Math.floor(active * 1.5);
        }

        function displayEmployees() {
            const container = document.getElementById('employees-list');
            
            if (employees.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üë•</div>
                        <h3>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</p>
                    </div>
                `;
                return;
            }
            
            let filteredEmployees = [...employees];
            
            // –§–∏–ª—å—Ç—Ä –ø–æ —Ä–æ–ª–∏
            if (currentRoleFilter !== 'all') {
                if (currentRoleFilter === 'admin') {
                    filteredEmployees = filteredEmployees.filter(e => 
                        e.role === 'admin' || e.role === 'assistant' || e.role === 'webdev'
                    );
                } else if (currentRoleFilter === 'staff') {
                    filteredEmployees = filteredEmployees.filter(e => 
                        !['admin', 'assistant', 'webdev'].includes(e.role)
                    );
                } else if (currentRoleFilter === 'inactive') {
                    filteredEmployees = filteredEmployees.filter(e => 
                        e.status !== 'active'
                    );
                }
            }
            
            // –§–∏–ª—å—Ç—Ä –ø–æ –ø–æ–∏—Å–∫—É
            if (currentSearchQuery) {
                const query = currentSearchQuery.toLowerCase();
                filteredEmployees = filteredEmployees.filter(e => 
                    e.name.toLowerCase().includes(query) ||
                    e.position.toLowerCase().includes(query) ||
                    e.role.toLowerCase().includes(query)
                );
            }
            
            container.innerHTML = '';
            
            filteredEmployees.forEach(employee => {
                const row = document.createElement('div');
                row.className = `employee-row ${employee.status !== 'active' ? 'inactive' : ''}`;
                
                const location = GALLERY13_CONFIG.locations.find(l => l.id === employee.location);
                const roleName = GALLERY13_CONFIG.roles[employee.role] || employee.role;
                
                row.innerHTML = `
                    <div class="employee-info">
                        <div class="employee-avatar">
                            ${getAvatarForRole(employee.role)}
                        </div>
                        <div class="employee-details">
                            <div class="employee-name">${employee.name}</div>
                            <div class="employee-position">${employee.position || roleName}</div>
                        </div>
                    </div>
                    <div class="role-badge role-${employee.role}">
                        ${roleName}
                    </div>
                    <div class="location-tag">
                        ${location ? location.name : employee.location}
                    </div>
                    <div class="status-badge status-${employee.status || 'active'}">
                        ${getStatusText(employee.status)}
                    </div>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="viewEmployee(${employee.id})" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                            üëÅÔ∏è
                        </button>
                        <button class="action-btn" onclick="editEmployee(${employee.id})" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                            ‚úèÔ∏è
                        </button>
                        <button class="action-btn" onclick="deleteEmployee(${employee.id})" title="–£–¥–∞–ª–∏—Ç—å">
                            üóëÔ∏è
                        </button>
                    </div>
                `;
                
                container.appendChild(row);
            });
        }

        function searchEmployees() {
            currentSearchQuery = document.getElementById('employee-search').value.trim();
            displayEmployees();
        }

        function clearSearch() {
            document.getElementById('employee-search').value = '';
            currentSearchQuery = '';
            displayEmployees();
        }

        function setRoleFilter(role) {
            currentRoleFilter = role;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            event.target.classList.add('active');
            
            displayEmployees();
        }

        function showAddEmployeeForm() {
            currentEmployeeId = null;
            document.getElementById('form-title').textContent = '–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞';
            document.getElementById('form-submit-btn').textContent = '–î–æ–±–∞–≤–∏—Ç—å';
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
            document.getElementById('employee-form').reset();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∞–≤–∞
            updatePermissions();
            
            document.getElementById('employee-form-modal').style.display = 'flex';
        }

        function hideEmployeeForm() {
            document.getElementById('employee-form-modal').style.display = 'none';
        }

        function generatePin() {
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ 4-–∑–Ω–∞—á–Ω–æ–≥–æ PIN
            const pin = Math.floor(1000 + Math.random() * 9000);
            document.getElementById('employee-pin').value = pin;
        }

        function updatePermissions() {
            const role = document.getElementById('employee-role').value;
            const permissions = role ? GALLERY13_CONFIG.permissions[role] || [] : [];
            const container = document.getElementById('permissions-list');
            
            if (!role) {
                container.innerHTML = '<p class="hint">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–∞–≤</p>';
                return;
            }
            
            const allPermissions = [
                { id: 'report', name: '–û—Ç—á–µ—Ç—ã', desc: '–°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤' },
                { id: 'complaints', name: '–ê–Ω–æ–Ω–∏–º–Ω—ã–µ –∂–∞–ª–æ–±—ã', desc: '–ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π' },
                { id: 'household', name: '–•–æ–∑—á–∞—Å—Ç—å', desc: '–ó–∞–∫–∞–∑ —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–æ–≤' },
                { id: 'chat', name: '–û–±—â–∏–π —á–∞—Ç', desc: '–î–æ—Å—Ç—É–ø –∫ –∫–æ–º–∞–Ω–¥–Ω–æ–º—É —á–∞—Ç—É' },
                { id: 'manage_employees', name: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏', desc: '–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤' },
                { id: 'view_all_locations', name: '–í—Å–µ –ª–æ–∫–∞—Ü–∏–∏', desc: '–î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ç–æ—á–∫–∞–º Gallery 13' }
            ];
            
            let html = '';
            allPermissions.forEach(perm => {
                const hasPerm = permissions.includes(perm.id);
                html += `
                    <div class="permission-item">
                        <input type="checkbox" id="perm-${perm.id}" 
                               ${hasPerm ? 'checked' : ''} 
                               ${hasPerm ? '' : 'disabled'}>
                        <div class="permission-info">
                            <div class="permission-name">${perm.name}</div>
                            <div class="permission-description">${perm.desc}</div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function saveEmployee() {
            const formData = {
                name: document.getElementById('employee-name').value,
                position: document.getElementById('employee-position').value,
                phone: document.getElementById('employee-phone').value,
                email: document.getElementById('employee-email').value,
                role: document.getElementById('employee-role').value,
                location: document.getElementById('employee-location').value,
                pin: document.getElementById('employee-pin').value,
                telegramId: document.getElementById('employee-telegram').value,
                status: 'active'
            };
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            if (!formData.pin.match(/^\d{4}$/)) {
                alert('PIN-–∫–æ–¥ –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ 4 —Ü–∏—Ñ—Ä');
                return;
            }
            
            if (currentEmployeeId) {
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                const index = employees.findIndex(e => e.id === currentEmployeeId);
                if (index !== -1) {
                    employees[index] = { ...employees[index], ...formData };
                    showNotification('‚úÖ –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ–±–Ω–æ–≤–ª–µ–Ω');
                }
            } else {
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                const newId = Math.max(...employees.map(e => e.id), 0) + 1;
                employees.push({
                    id: newId,
                    ...formData
                });
                showNotification('‚úÖ –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω');
            }
            
            hideEmployeeForm();
            loadEmployees();
        }

        function viewEmployee(id) {
            const employee = employees.find(e => e.id === id);
            if (!employee) return;
            
            currentEmployeeId = id;
            document.getElementById('detail-employee-name').textContent = employee.name;
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∫–ª–∞–¥–∫—É —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
            loadEmployeeDetail(employee);
            
            document.getElementById('employee-detail-modal').style.display = 'flex';
        }

        function loadEmployeeDetail(employee) {
            const location = GALLERY13_CONFIG.locations.find(l => l.id === employee.location);
            const roleName = GALLERY13_CONFIG.roles[employee.role] || employee.role;
            
            // –í–∫–ª–∞–¥–∫–∞ "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"
            const infoTab = document.getElementById('tab-info');
            infoTab.innerHTML = `
                <div class="detail-grid">
                    <div class="detail-card">
                        <h3>üë§ –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                        <div class="detail-item">
                            <span class="detail-label">–§–ò–û:</span>
                            <span class="detail-value">${employee.name}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">–î–æ–ª–∂–Ω–æ—Å—Ç—å:</span>
                            <span class="detail-value">${employee.position || roleName}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">–†–æ–ª—å:</span>
                            <span class="detail-value">${roleName}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">–°—Ç–∞—Ç—É—Å:</span>
                            <span class="detail-value">${getStatusText(employee.status)}</span>
                        </div>
                    </div>
                    
                    <div class="detail-card">
                        <h3>üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                        <div class="detail-item">
                            <span class="detail-label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
                            <span class="detail-value">${employee.phone || '–ù–µ —É–∫–∞–∑–∞–Ω'}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Email:</span>
                            <span class="detail-value">${employee.email || '–ù–µ —É–∫–∞–∑–∞–Ω'}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Telegram:</span>
                            <span class="detail-value">${employee.telegramId || '–ù–µ —É–∫–∞–∑–∞–Ω'}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">PIN-–∫–æ–¥:</span>
                            <span class="detail-value">‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
                        </div>
                    </div>
                    
                    <div class="detail-card">
                        <h3>üìç –†–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ</h3>
                        <div class="detail-item">
                            <span class="detail-label">–õ–æ–∫–∞—Ü–∏—è:</span>
                            <span class="detail-value">${location ? location.name : employee.location}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:</span>
                            <span class="detail-value">${new Date().toLocaleDateString('ru-RU')}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</span>
                            <span class="detail-value">–°–µ–≥–æ–¥–Ω—è, 09:30</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">–û—Ç—á–µ—Ç–æ–≤ –∑–∞ –º–µ—Å—è—Ü:</span>
                            <span class="detail-value">12</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function switchTab(tabName) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // –°–Ω–∏–º–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(`tab-${tabName}`).style.display = 'block';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –∫–Ω–æ–ø–∫–µ
            event.target.classList.add('active');
        }

        function hideEmployeeDetail() {
            document.getElementById('employee-detail-modal').style.display = 'none';
        }

        function editEmployee(id = null) {
            if (id === null) id = currentEmployeeId;
            const employee = employees.find(e => e.id === id);
            if (!employee) return;
            
            currentEmployeeId = id;
            document.getElementById('form-title').textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞';
            document.getElementById('form-submit-btn').textContent = '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å';
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É –¥–∞–Ω–Ω—ã–º–∏
            document.getElementById('employee-name').value = employee.name;
            document.getElementById('employee-position').value = employee.position || '';
            document.getElementById('employee-phone').value = employee.phone || '';
            document.getElementById('employee-email').value = employee.email || '';
            document.getElementById('employee-role').value = employee.role;
            document.getElementById('employee-location').value = employee.location;
            document.getElementById('employee-pin').value = employee.pin || '';
            document.getElementById('employee-telegram').value = employee.telegramId || '';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∞–≤–∞
            updatePermissions();
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª–∏ –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
            hideEmployeeDetail();
            document.getElementById('employee-form-modal').style.display = 'flex';
        }

        function deleteEmployee(id) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞?')) {
                employees = employees.filter(e => e.id !== id);
                loadEmployees();
                showNotification('üóëÔ∏è –°–æ—Ç—Ä—É–¥–Ω–∏–∫ —É–¥–∞–ª–µ–Ω');
            }
        }

        function resetPassword() {
            if (confirm('–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π PIN-–∫–æ–¥ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞?')) {
                const newPin = Math.floor(1000 + Math.random() * 9000);
                alert(`–ù–æ–≤—ã–π PIN-–∫–æ–¥: ${newPin}\n\n–°–æ–æ–±—â–∏—Ç–µ –µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É.`);
                showNotification('üîÑ PIN-–∫–æ–¥ —Å–±—Ä–æ—à–µ–Ω');
            }
        }

        function deactivateEmployee() {
            if (confirm('–î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞?')) {
                const index = employees.findIndex(e => e.id === currentEmployeeId);
                if (index !== -1) {
                    employees[index].status = 'inactive';
                    loadEmployees();
                    hideEmployeeDetail();
                    showNotification('üö´ –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω');
                }
            }
        }

        function exportEmployees() {
            // –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV
            const csv = '–§–ò–û;–î–æ–ª–∂–Ω–æ—Å—Ç—å;–†–æ–ª—å;–õ–æ–∫–∞—Ü–∏—è;–¢–µ–ª–µ—Ñ–æ–Ω;Email;–°—Ç–∞—Ç—É—Å\n' +
                employees.map(e => 
                    `${e.name};${e.position || ''};${GALLERY13_CONFIG.roles[e.role] || e.role};` +
                    `${GALLERY13_CONFIG.locations.find(l => l.id === e.location)?.name || e.location};` +
                    `${e.phone || ''};${e.email || ''};${getStatusText(e.status)}`
                ).join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `gallery13_employees_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            
            showNotification('üì• –≠–∫—Å–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω');
        }

        function refreshEmployees() {
            loadEmployees();
            showNotification('üîÑ –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω');
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function getAvatarForRole(role) {
            const avatars = {
                admin: 'üë®‚Äçüíº',
                assistant: 'üë©‚Äçüíº',
                manager: 'üëî',
                cashier: 'üí∞',
                security: 'üëÆ‚Äç‚ôÇÔ∏è',
                consultant: 'üíÅ',
                webdev: 'üë®‚Äçüíª'
            };
            return avatars[role] || 'üë§';
        }

        function getStatusText(status) {
            const texts = {
                active: '–ê–∫—Ç–∏–≤–µ–Ω',
                inactive: '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω',
                away: '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'
            };
            return texts[status] || status;
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--primary-purple);
                color: white;
                padding: 12px 24px;
                border-radius: 12px;
                box-shadow: 0 8px 24px rgba(139, 92, 246, 0.3);
                z-index: 2000;
                animation: slideIn 0.3s ease-out;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>