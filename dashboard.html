<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery 13 | –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="config.js" defer></script>
    <script src="js/auth.js" defer></script>
</head>
<body>
    <div class="container">
        <!-- –®–∞–ø–∫–∞ Gallery 13 -->
        <header class="gallery-header">
            <div class="header-left">
                <button class="btn-icon back-btn" onclick="window.location.href='index.html'">
                    üè†
                </button>
                <div class="gallery-brand">
                    <span class="brand-icon">üñºÔ∏è</span>
                    <div>
                        <h1>Gallery 13</h1>
                        <p class="brand-subtitle">Work Space Control</p>
                    </div>
                </div>
            </div>
            
            <div class="user-profile">
                <div class="user-avatar">
                    <span id="user-avatar">üë§</span>
                </div>
                <button class="btn-icon" id="logout-btn" title="–í—ã–π—Ç–∏">
                    üö™
                </button>
            </div>
        </header>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ -->
        <div class="employee-card">
            <div class="employee-info">
                <h3 id="employee-name"></h3>
                <div class="employee-details">
                    <span class="badge role-badge" id="employee-role"></span>
                    <span class="location-tag" id="employee-location"></span>
                </div>
                <p class="employee-position" id="employee-position"></p>
            </div>
            <div class="current-time">
                <span id="current-time"></span>
                <small id="current-date"></small>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª -->
        <div class="section-title">
            <h2>‚ö° –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</h2>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º</p>
        </div>

        <div class="dashboard-grid">
            <!-- –û—Ç—á–µ—Ç -->
            <div class="feature-card gradient-purple" id="report-card">
                <div class="feature-icon">üìä</div>
                <h3>–°—É—Ç–æ—á–Ω—ã–π –æ—Ç—á–µ—Ç</h3>
                <p>–ö–∞—Å—Å–∞, –≤–∏—Ç—Ä–∏–Ω—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ</p>
                <div class="feature-stats">
                    <span class="stat">–°–µ–≥–æ–¥–Ω—è: 0</span>
                </div>
            </div>

            <!-- –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –∂–∞–ª–æ–±—ã -->
            <div class="feature-card gradient-blue" id="complaints-card">
                <div class="feature-icon">üïµÔ∏è</div>
                <h3>–ê–Ω–æ–Ω–∏–º–Ω—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è</h3>
                <p>–¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>
                <div class="notification-badge" id="complaints-count">0</div>
            </div>

            <!-- –•–æ–∑—á–∞—Å—Ç—å -->
            <div class="feature-card gradient-green" id="household-card">
                <div class="feature-icon">üõ†Ô∏è</div>
                <h3>–•–æ–∑—á–∞—Å—Ç—å</h3>
                <p>–ó–∞–∫–∞–∑ —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–æ–≤</p>
                <div class="feature-stats">
                    <span class="stat">–ê–∫—Ç–∏–≤–Ω—ã—Ö: 0</span>
                </div>
            </div>

            <!-- –û–±—â–∏–π —á–∞—Ç -->
            <div class="feature-card gradient-orange" id="chat-card">
                <div class="feature-icon">üí¨</div>
                <h3>–ö–æ–º–∞–Ω–¥–Ω—ã–π —á–∞—Ç</h3>
                <p>–û–±—â–µ–Ω–∏–µ —Å —Ñ–æ—Ç–æ</p>
                <div class="feature-stats">
                    <span class="stat">–ù–æ–≤—ã—Ö: 0</span>
                </div>
            </div>

            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ -->
            <div class="feature-card gradient-red" id="employees-card">
                <div class="feature-icon">üë•</div>
                <h3>–ö–æ–º–∞–Ω–¥–∞</h3>
                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º</p>
                <div class="feature-stats">
                    <span class="stat">–í—Å–µ–≥–æ: 0</span>
                </div>
            </div>

            <!-- –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç—á–µ—Ç—ã -->
            <div class="feature-card gradient-teal" id="quick-report-card">
                <div class="feature-icon">‚ö°</div>
                <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                <p>–®–∞–±–ª–æ–Ω—ã –æ—Ç—á–µ—Ç–æ–≤</p>
            </div>
        </div>

        <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
        <div class="section-title">
            <h2>üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
            <p>–ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</p>
        </div>

        <div class="quick-actions-grid">
            <button class="quick-action-btn" onclick="sendQuickReport('open')">
                <span class="action-icon">üîì</span>
                –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã
            </button>
            
            <button class="quick-action-btn" onclick="sendQuickReport('close')">
                <span class="action-icon">üîí</span>
                –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã
            </button>
            
            <button class="quick-action-btn" onclick="window.location.href='household.html?item=water'">
                <span class="action-icon">üíß</span>
                –ó–∞–∫–∞–∑–∞—Ç—å –≤–æ–¥—É
            </button>
            
            <button class="quick-action-btn" onclick="window.location.href='report.html?template=daily'">
                <span class="action-icon">üìã</span>
                –î–Ω–µ–≤–Ω–æ–π –æ—Ç—á–µ—Ç
            </button>
        </div>

        <!-- –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã -->
        <div class="system-status">
            <h3>üìà –°—Ç–∞—Ç—É—Å Gallery 13</h3>
            <div class="status-grid">
                <div class="status-item online">
                    <span class="status-dot"></span>
                    –°–∏—Å—Ç–µ–º–∞ –æ–Ω–ª–∞–π–Ω
                </div>
                <div class="status-item">
                    <span class="status-dot warning"></span>
                    –°–º–µ–Ω—ã –∞–∫—Ç–∏–≤–Ω—ã: 3
                </div>
                <div class="status-item">
                    <span class="status-dot"></span>
                    –ó–∞—è–≤–æ–∫ —Å–µ–≥–æ–¥–Ω—è: 5
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            if (!window.currentEmployee) {
                window.location.href = 'index.html';
                return;
            }

            const employee = window.currentEmployee;
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ
            document.getElementById('employee-name').textContent = employee.name;
            document.getElementById('employee-role').textContent = 
                GALLERY13_CONFIG.roles[employee.role];
            document.getElementById('employee-position').textContent = 
                employee.position || employee.role;
            
            // –ù–∞—Ö–æ–¥–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏
            const location = GALLERY13_CONFIG.locations.find(l => l.id === employee.location);
            document.getElementById('employee-location').textContent = 
                location ? location.name : employee.location;

            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è
            function updateTime() {
                const now = new Date();
                document.getElementById('current-time').textContent = 
                    now.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });
                document.getElementById('current-date').textContent = 
                    now.toLocaleDateString('ru-RU', { weekday: 'long', day: 'numeric', month: 'long' });
            }
            updateTime();
            setInterval(updateTime, 60000);

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
            const permissions = GALLERY13_CONFIG.permissions[employee.role];
            
            // –°–∫—Ä—ã–≤–∞–µ–º –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
            if (!permissions.includes('report')) {
                document.getElementById('report-card').style.display = 'none';
                document.getElementById('quick-report-card').style.display = 'none';
            }
            if (!permissions.includes('complaints')) {
                document.getElementById('complaints-card').style.display = 'none';
            }
            if (!permissions.includes('manage_employees')) {
                document.getElementById('employees-card').style.display = 'none';
            }

            // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
            document.getElementById('report-card').addEventListener('click', () => {
                window.location.href = 'report.html';
            });
            
            document.getElementById('complaints-card').addEventListener('click', () => {
                window.location.href = 'anonymous.html';
            });
            
            document.getElementById('household-card').addEventListener('click', () => {
                window.location.href = 'household.html';
            });
            
            document.getElementById('chat-card').addEventListener('click', () => {
                window.location.href = 'chat.html';
            });
            
            document.getElementById('employees-card').addEventListener('click', () => {
                window.location.href = 'employees.html';
            });
            
            document.getElementById('quick-report-card').addEventListener('click', () => {
                window.location.href = 'report.html?quick=true';
            });

            // –í—ã—Ö–æ–¥
            document.getElementById('logout-btn').addEventListener('click', function() {
                if (confirm('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã?')) {
                    window.currentEmployee = null;
                    window.location.href = 'index.html';
                }
            });

            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            loadDashboardStats();
        });

        function loadDashboardStats() {
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            // –ü–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞
            setTimeout(() => {
                document.getElementById('complaints-count').textContent = '3';
            }, 500);
        }

        function sendQuickReport(type) {
            const reports = {
                'open': '–û—Ç—á–µ—Ç –æ–± –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å–º–µ–Ω—ã',
                'close': '–û—Ç—á–µ—Ç –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–º–µ–Ω—ã'
            };
            
            if (confirm(`–û—Ç–ø—Ä–∞–≤–∏—Ç—å ${reports[type]}?`)) {
                // –û—Ç–ø—Ä–∞–≤–∫–∞ –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç—á–µ—Ç–∞
                alert(`${reports[type]} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É`);
            }
        }
    </script>
</body>
</html>